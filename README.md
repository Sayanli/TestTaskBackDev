# TestTaskBackDev

Данный сервис предназначен для регистрации пользователя и обновления его токенов

Что использовалось:
- Golang
- MongoDB (в качестве хранилища данных)
- Fiber (веб фреймворк)
- Docker (для удобства запуска сервиса и базы данных)
- Swagger (для документации API)

Данный сервис был написан с Clean Architecture. Это позволяет легко расширять функционал сервиса и поддерживать в дальнейшем.

# Usage

Запустить сервис вместе с базой данных с использованием docker можно с помощью команды `make compose-up`

Без использования docker контейнера можно запустить командой `make run`

Документацию после запуска сервиса можно посмотреть по адресу `http://localhost:8080/swagger`


## Endpoints

### Регистрация
Для регистрации пользователя отправьте POST запрос на `/api/v1/auth/create` с приведённым телом:
```json
{
  "guid": "guid"
}
```
При повторном использовании guid будет возвращена ошибка

Пример ответа:
```json
{
  "accesstoken": "accesstoken",
  "refreshtoken": "refreshtoken"
}
```

### Обновление токенов
Для обновления токенов отправьте POST запрос на `/api/v1/auth/refresh` с приведённым телом:
```json
{
  "guid": "guid",
  "refreshtoken": "refreshtoken"
}
```

Пример ответа:
```json
{
  "accesstoken": "accesstoken",
  "refreshtoken": "refreshtoken"
}
```
Если при отправке запроса будет введен некорректный refresh токен, то будет возвращена ошибка
